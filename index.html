<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>¬øQuieres ser mi San Valent√≠n? ‚ù§Ô∏è</title>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at top, #300018, #000);
      font-family: 'Segoe UI', sans-serif;
      user-select: none;
    }

    canvas {
      display: block;
    }

    .overlay {
      position: absolute;
      top: 5%;
      width: 100%;
      text-align: center;
      color: #fff;
      z-index: 10;
      pointer-events: none;
    }

    .overlay h1 {
      font-size: 2.2rem;
      margin: 0;
      text-shadow: 0 0 20px rgba(255, 80, 120, 0.8);
    }

    .overlay p {
      margin-top: 8px;
      font-size: 1.1rem;
      opacity: 0.85;
    }

    .buttons-container {
      position: absolute;
      bottom: 12%;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 30px;
      z-index: 10;
    }

    .btn {
      padding: 16px 48px;
      font-size: 1.3rem;
      font-weight: bold;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: all 0.3s ease;
    }

    .btn-si {
      background: linear-gradient(135deg, #ff4d8d, #ff2d6f);
      color: #fff;
      box-shadow: 0 0 25px rgba(255, 45, 111, 0.6);
    }

    .btn-si:hover {
      transform: scale(1.1);
      box-shadow: 0 0 40px rgba(255, 45, 111, 0.9);
    }

    .btn-no {
      background: linear-gradient(135deg, #777, #555);
      color: #fff;
    }

    .contract-message {
      position: absolute;
      bottom: 22%;
      width: 100%;
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 10;
    }

    .contract-message.show {
      opacity: 1;
    }

    .contract-message p {
      display: inline-block;
      background: rgba(255, 45, 111, 0.15);
      border: 1px solid rgba(255, 45, 111, 0.4);
      padding: 12px 26px;
      border-radius: 16px;
      color: #ffccd5;
      animation: shake 0.5s ease;
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-3px); }
    }

    .love-message {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.8s ease;
      z-index: 20;
      pointer-events: none;
    }

    .love-message.show {
      opacity: 1;
      pointer-events: auto;
    }

    .love-message h1 {
      font-size: 3rem;
      color: #fff;
      text-shadow: 0 0 40px rgba(255, 80, 120, 1);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.08); }
    }

    .anniversary-msg {
      margin-top: 12px;
      font-size: 1.4rem;
      color: #ffccd5;
      opacity: 0;
      animation: fadeIn 1.2s ease 1s forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hearts-rain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 19;
    }

    .falling-heart {
      position: absolute;
      top: -5%;
      font-size: 2rem;
      animation: fall linear infinite;
      opacity: 0.8;
    }

    @keyframes fall {
      to {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0.3;
      }
    }

    @media (max-width: 480px) {
      .overlay h1 { font-size: 1.4rem; }
      .btn { padding: 12px 30px; font-size: 1.05rem; }
      .love-message h1 { font-size: 2rem; }
    }
  </style>
</head>

<body>

  <div class="overlay" id="question">
    <h1>¬øQuieres ser mi San Valent√≠n? ‚ù§Ô∏è</h1>
    <p>Con todo mi coraz√≥n</p>
  </div>

  <div class="buttons-container" id="buttonsContainer">
    <button class="btn btn-si" onclick="onClickSi()">S√≠ üíñ</button>
    <button class="btn btn-no" id="btnNo" onclick="onClickNo()">No</button>
  </div>

  <div class="contract-message" id="contractMessage">
    <p>Lo siento‚Ä¶ el contrato dice que es S√ç üìú‚ù§Ô∏è</p>
  </div>

  <div class="love-message" id="loveMessage">
    <h1>Te amo mucho ‚ù§Ô∏è</h1>
    <p class="anniversary-msg">Te veo el s√°bado para celebrar üíï</p>
  </div>

  <div class="hearts-rain" id="heartsRain"></div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.158/build/three.min.js"></script>

  <script>
    let throwHeart = false;
    let throwStart = 0;

    function onClickSi() {
      buttonsContainer.style.display = "none";
      question.style.display = "none";
      loveMessage.classList.add("show");
      createHeartsRain();
      throwHeart = true;
      throwStart = clock.getElapsedTime();
    }

    function onClickNo() {
      contractMessage.classList.add("show");
      setTimeout(() => {
        btnNo.textContent = "S√≠ üíñ";
        btnNo.className = "btn btn-si";
        btnNo.onclick = onClickSi;
      }, 700);
    }

    function createHeartsRain() {
      const hearts = ["‚ù§Ô∏è","üíñ","üíó","üíï","üíù"];
      for (let i = 0; i < 30; i++) {
        const h = document.createElement("span");
        h.className = "falling-heart";
        h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
        h.style.left = Math.random()*100 + "%";
        h.style.animationDuration = 3 + Math.random()*4 + "s";
        h.style.fontSize = 1.2 + Math.random()*1.5 + "rem";
        heartsRain.appendChild(h);
      }
    }

    // ===== THREE.JS =====
    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(
      60,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    camera.position.set(0, 0.5, 6);

    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    scene.add(new THREE.AmbientLight(0xffcccc, 0.7));
    const light = new THREE.PointLight(0xff6699, 1.2);
    light.position.set(5, 5, 5);
    scene.add(light);

    const group = new THREE.Group();

    const white = new THREE.MeshStandardMaterial({ color: 0xffffff });
    const black = new THREE.MeshStandardMaterial({ color: 0x111111 });
    const orange = new THREE.MeshStandardMaterial({ color: 0xdd5522 });

    const head = new THREE.Mesh(new THREE.SphereGeometry(0.7,32,32), white);
    head.position.y = 1.1;
    group.add(head);

    const earGeo = new THREE.CapsuleGeometry(0.15,0.7,8,16);
    const earL = new THREE.Mesh(earGeo, white);
    earL.position.set(-0.25,2.15,0);
    group.add(earL);
    const earR = earL.clone();
    earR.position.x = 0.25;
    group.add(earR);

    const eyeGeo = new THREE.SphereGeometry(0.07,16,16);
    const eyeL = new THREE.Mesh(eyeGeo, black);
    eyeL.position.set(-0.22,1.15,0.6);
    group.add(eyeL);
    const eyeR = eyeL.clone();
    eyeR.position.x = 0.22;
    group.add(eyeR);

    const body = new THREE.Mesh(new THREE.SphereGeometry(0.55,32,32), orange);
    body.scale.set(1,1.2,0.85);
    body.position.y = 0.1;
    group.add(body);

    const heartShape = new THREE.Shape();
    heartShape.moveTo(0, 1.2);
    heartShape.bezierCurveTo(0, 1.2, -1.6, 0.2, -1.6, -0.8);
    heartShape.bezierCurveTo(-1.6, -2.4, 0.2, -2.4, 0, -0.8);
    heartShape.bezierCurveTo(-0.2, -2.4, 1.6, -2.4, 1.6, -0.8);
    heartShape.bezierCurveTo(1.6, 0.2, 0, 1.2, 0, 1.2);

    const heartGeo = new THREE.ExtrudeGeometry(heartShape,{
      depth:0.3,
      bevelEnabled:true,
      bevelSize:0.12,
      bevelThickness:0.15,
      bevelSegments:20
    });
    heartGeo.center();

    const heartMat = new THREE.MeshStandardMaterial({
      color:0xff2d6f,
      metalness:0.4,
      roughness:0.2,
      emissive:0x33000f
    });

    const heart = new THREE.Mesh(heartGeo, heartMat);
    heart.rotation.x = Math.PI;
    heart.scale.set(0.28,0.28,0.28);
    heart.position.set(0,0.55,0.55);
    group.add(heart);

    group.position.y = -0.5;
    scene.add(group);

    const clock = new THREE.Clock();

    function animate(){
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();
      const pulse = 0.28 + Math.sin(t*3)*0.015;

      if (throwHeart) {
        const dt = Math.min((t - throwStart) / 1.1, 1);
        const ease = 1 - Math.pow(1 - dt, 3);
        const arc = Math.sin(dt * Math.PI) * 0.7;
        heart.position.set(0, 0.55 + ease * 2.2 + arc, 0.55 - ease * 2.4);
        heart.scale.set(pulse * (1 + ease * 0.4), pulse * (1 + ease * 0.4), pulse * (1 + ease * 0.4));
        if (dt >= 1) {
          throwHeart = false;
        }
      } else {
        heart.position.set(0, 0.55, 0.55);
        heart.scale.set(pulse, pulse, pulse);
      }

      group.rotation.y = Math.sin(t*0.8)*0.15;
      renderer.render(scene,camera);
    }
    animate();

    window.addEventListener("resize",()=>{
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
